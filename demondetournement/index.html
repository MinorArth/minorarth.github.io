<!DOCTYPE HTML>
<html class="js" lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title>DEMON DÉTOURNEMENT</title>
	<meta http-equiv="Content-Type"  content="text/html; charset=utf-8"/>
	<meta property="og:site_name"    content="Minor Arth mashups"/>
	<meta property="og:title"        content="DEMON DÉTOURNEMENT"/>
	<meta property="og:description"  content="Gorillaz - Demon Days | The 20th Anniversary Mashup Album by Steff's Gorillaz Mashup Project"/>
	<meta property="og:url"          content="https://minorarth.github.io/demondetournement"/>
	<meta property="og:image"        content="https://minorarth.github.io/demondetournement/DemonDetournement.jpg"/>
	<meta property="og:image:width"  content="720"/>
	<meta property="og:image:height" content="720" />
	<meta property="og:image:type"   content="image/jpeg"/>
	<style>
	@media screen {
		body{
			/*background-image: linear-gradient(150deg,#48C,#001621); */
			background-color: #081640;
			color: white;
		}

		h1 { margin-bottom: 8px; }
		a, .number, .duration { color: #e7d1ac; }
		.padding-tr {padding-top: 4px; padding-right: 4px;}
		a:active{  color: white; }		
		p.sources { color: #DDD; }

		div.playlist-template {
			width: 494px;
			background-color: #001220;
		}

		div.active {
			background-color: #004560;
		}
	}

	a, .bold { font-weight: bold; cursor: pointer; }

	body {
		font-family:  Helvetica, sans-serif, 'Tw Cen MT', 'HP Simplified', Arial;
		text-align: center;
	}

	.align-left  { text-align: left; }
	.align-right { text-align: right; }
	.float-right, img.icon { float: right; text-align: right; }

	img.player-image[src] { max-width: 720px; border: solid 8px white;  }
	div.toolbar audio {	width: 600px; height: 24px; }
	div.repeater { max-width: 1400px; }

	@media only screen and (max-width: 2140px)
	{
		img.player-image[src] { max-width: 600px;   border: solid 6px white;  }
		div.toolbar audio {	width: 480px; }
		div.repeater { 	max-width: 1000px;	}
	}

	@media only screen and (max-width: 1600px)
	{
		img.player-image[src] { max-width: 360px;   border: solid 4px white;  }
		div.toolbar audio {	width: 300px; }
		div.repeater { 	max-width: 1000px;	}
	}

	@media only screen and (max-width: 1400px)
	{
		div.repeater { 	max-width: 600px;	}
	}

	div.toolbar > * {
		vertical-align: middle;
	}

	a.link-template, a.play-link-template { margin-left: 1em; margin-right: 1em; }

	div.repeater { 	padding-left: 10px; padding-right: 10px; }

	div.playlist-template {
		font-size: 12pt;
		cursor: pointer;
		text-align: left;
		border: 1px solid #CCC;
		padding: 2px;
		margin-left: auto;
		margin-right: auto;
	}

	div.playlist-template div.item-text {
		vertical-align: middle;
		display: inline-block;
	}

	div.playlist-template img.artwork[src] {
		height: .7in;
		vertical-align: middle;
	}

	div.tile-template, div.image-template, div.small-image-template {
		display: inline-block;
		vertical-align: top;
		cursor: pointer;
	}

	div.tile-template {
		width: 4in;
		padding: .25in;
	}

	div.image-template {
		width: 40%;
		margin: 20px;
	}

	div.image-template img.artwork[src] {
		width: 100%;
		max-width: 900px;
		border: solid 4px white;
	}

	div.tile-template img.artwork[src] {
		width: 3in;
		border: solid 4px white;
	}

	div.small-image-template img.artwork[src] {
		width: 2in;
		transform: rotate(-5deg);
	}

@media screen {
	.column {
		display: inline-block;
		vertical-align: top;
	}
	
	.print-only { display: none; }
}
	.column.column-2 {
		width: 48%;
	}

	.column.column-3 {
		width: 30%;
	}

	.column.column-4 {
		width: 24%;
	}

	.pre {
		white-space: pre-line;
	}

	p {
		white-space: pre-line;
		margin-block-start: .5em;
		margin-block-end: 0em;
	}

	a { text-decoration: none; }
	a.logo img { height: 90px; padding-top: 10px; display: inline-block;	}
	.hidden { display: none; }

	@media print {
		.no-print { display: none; }
	}
	</style>
</head>
<body>
	<a class="logo print-only"><img /></a>
<div class="toolbar no-print column">
	<a class="logo"><img /></a><br/>
	<a target="download" class="album-link">DOWNLOAD ALBUM</a>
	<br/><br/>
	<img class="player-image"/>
	<br/><br/>
	<button onclick="playPrevious()" title="Previous track"> &lt;&lt; </button>
	<audio id="audioPlayer" controls></audio>
	<button onclick="playNext()" title="Next track"> &gt;&gt; </button>
	<br/>
	<audio id="hiddenPlayer" class="hidden" controls></audio>
	<div class="bold player-label"></div>
	<br/>
	<div class="align-left">
		Show:
		<select id="view-mode" onchange="refreshList()">
			<option value="playlist-template">playlist</option>
			<option value="playlist-template.details">playlist with details</option>
			<option value="tile-template">tiles</option>
			<option value="image-template">large images</option>
			<option value="small-image-template">small images</option>
		</select>
		<button onclick="loadDurations()" title="Shuffle playlist">Duration</button>
		<i class="total-duration number"></i>
		<br/>
		<br/>
		Order:
		<button onclick="shuffle()" title="Shuffle playlist">Shuffle</button>
		<button onclick="reverse()" title="Reverse playlist">Reverse</button>
		<button onclick="reorder()" title="Reset playlist order">Reset</button>
		<br/><br/>
	</div>
</div>

<div class="column">
	<h1><a target="download" class="album-title album-link"></a></h1>
	<div class="album-description"></div>
	<h3 id="playlist-links" class="no-print"></h3>

	<div class="repeater"></div>
</div>
<p class="links"></p>

<div id="templates" class="hidden">
	<a class="link-template"></a>
	<a class="play-link-template"></a>

	<div class="category-template">
		<a class="url">
			<h3 class="pre title"></h3>
		</a>
	</div>

	<div class="separator-template">
		<hr/>
		<b class="title"></b>
	</div>

	<div class="image-template">
		<img class="artwork"/>
	</div>

	<div class="small-image-template">
		<img class="artwork"/>
	</div>

	<div class="tile-template">
		<img class="artwork"/>
		<div class="float-right padding-tr">
			<a class="remix-audio" target="video" onclick="stopPropagation(event)"><img class="icon no-print" src="artwork/remixaudio.png"/></a>
			<br/><i class="duration"></i>
		</div>
		<p><i class="number"></i>. <b class="title"></b></p>
		<p class="sources"></p>
	</div>

	<div class="playlist-template column">
		<img class="artwork"/>
		<div class="float-right padding-tr">
			<a class="remix-audio" target="video" onclick="stopPropagation(event)"><img class="icon no-print" src="artwork/remixaudio.png"/></a>
			<br/><i class="duration"></i>
		</div>
		<div class="item-text pre"><i class="number"></i>. <b class="title"></b></div>
	</div>

	<div class="playlist-template details column">
		<img class="artwork"/>
		<div class="float-right padding-tr">
			<a class="remix-audio" target="video" onclick="stopPropagation(event)"><img class="icon no-print" src="artwork/remixaudio.png"/></a>
			<br/><i class="duration"></i>
		</div>
		<div class="item-text pre"><i class="number"></i>. <b class="title"></b>
		<p class="sources"></p></div>
	</div>

</div>

<script>
var items = [
	{
		"title": "Album",
		"type": "category"
	},
	{
		"n": 1,
		"title": "Minor Arth - Gorillaz - Prince - Vincent Price - Radiohead - Intro",
		"image": "Minor Arth - Gorillaz - Prince - Vincent Price - Radiohead - Intro.jpg",
		"localFile": "Minor Arth - Gorillaz - Prince - Vincent Price - Radiohead - Intro.mp3",
		"sources": [
			"Gorillaz - Intro",
			"Prince - Let's Go Crazy",
			"Vincent Price - Thriller",
			"Radiohead - Fitter Happier"
		],
		"songTitle": "Intro",
		"producer": "Minor Arth",
		"artists": "Gorillaz / Prince / Vincent Price / Radiohead"
	},
	{
		"n": 2,
		"title": "Steff St Moore & Minor Arth - Gorillaz - Radiohead - Last Lucky Souls",
		"image": "Steff St Moore & Minor Arth - Gorillaz - Radiohead - Last Lucky Souls.jpg",
		"localFile": "Steff St Moore & Minor Arth - Gorillaz - Radiohead - Last Lucky Souls.mp3",
		"sources": [
			"Gorillaz - Last Living Souls",
			"Radiohead - Lucky"
		],
		"songTitle": "Last Lucky Souls",
		"producer": "Steff St Moore & Minor Arth",
		"artists": "Gorillaz / Radiohead"
	},
	{
		"n": 3,
		"id": 31701,
		"file": "331654723_1250220683_263260881.mp3",
		"title": "DoM - Gorillaz - The Clash - Kids With Guns In Brixton",
		"image": "DoM - Gorillaz - The Clash - Kids With Guns In Brixton.jpg",
		"localFile": "DoM - Gorillaz - The Clash - Kids With Guns In Brixton.mp3",
		"sources": [
			"Gorillaz - Kids With Guns",
			"The Clash - Guns Of Brixton",
			"https://youtu.be/lJ_1DWvw-jU"
		],
		"songTitle": "Kids With Guns In Brixton",
		"producer": "DoM",
		"artists": "Gorillaz / The Clash",
		"video": "https://youtu.be/lJ_1DWvw-jU"
	},
	{
		"n": 4,
		"title": "Steff St Moore - Gorillaz - Lady Gaga - O Green Telephone World",
		"image": "Steff St Moore - Gorillaz - Lady Gaga - O Green Telephone World.jpg",
		"localFile": "Steff St Moore - Gorillaz - Lady Gaga - O Green Telephone World.mp3",
		"sources": [
			"Gorillaz - O Green World",
			"Lady Gaga - Telephone"
		],
		"songTitle": "O Green Telephone World",
		"producer": "Steff St Moore",
		"artists": "Gorillaz / Lady Gaga"
	},
	{
		"n": 5,
		"id": 35483,
		"file": "259315763_117280260_1864047493.mp3",
		"title": "Minor Arth - Gorillaz - Grandmaster Flash & The Furious Five - The Message To Dirty Harry",
		"image": "Minor Arth - Gorillaz - Grandmaster Flash & The Furious Five - The Message To Dirty Harry.jpg",
		"localFile": "Minor Arth - Gorillaz - Grandmaster Flash & The Furious Five - The Message To Dirty Harry.mp3",
		"sources": [
			"Gorillaz - Dirty Harry",
			"Grandmaster Flash & The Furious Five - The Message"
		],
		"songTitle": "The Message To Dirty Harry",
		"producer": "Minor Arth",
		"artists": "Gorillaz / Grandmaster Flash & The Furious Five"
	},
	{
		"n": 6,
		"title": "Steff St Moore - Gorillaz - Michael Jackson - Feel Good Off The Wall",
		"image": "Steff St Moore - Gorillaz - Michael Jackson - Feel Good Off The Wall.jpg",
		"localFile": "Steff St Moore - Gorillaz - Michael Jackson - Feel Good Off The Wall.mp3",
		"sources": [
			"Gorillaz - Feel Good, Inc.",
			"Michael Jackson - Off The Wall"
		],
		"songTitle": "Feel Good Off The Wall",
		"producer": "Steff St Moore",
		"artists": "Gorillaz / Michael Jackson"
	},
	{
		"n": 7,
		"title": "Minor Arth - Gorillaz - The Cure - Lovesong Del Manana",
		"image": "Minor Arth - Gorillaz - The Cure - Lovesong Del Manana.jpg",
		"localFile": "Minor Arth - Gorillaz - The Cure - Lovesong Del Manana.mp3",
		"sources": [
			"Gorillaz - El Mañana",
			"The Cure - Lovesong"
		],
		"songTitle": "Lovesong Del Mañana",
		"producer": "Minor Arth",
		"artists": "Gorillaz / The Cure"
	},
	{
		"n": 8,
		"id": 30576,
		"file": "1763934030_1961094580_971784066.mp3",
		"title": "Minor Arth - Gorillaz - Dave Gahan - Iggy Pop - Grace Jones - Use Every Planet For Nightclubbing",
		"image": "Minor Arth - Gorillaz - Dave Gahan - Iggy Pop - Grace Jones - Use Every Planet For Nightclubbing.jpg",
		"localFile": "Minor Arth - Gorillaz - Dave Gahan - Iggy Pop - Grace Jones - Use Every Planet For Nightclubbing.mp3",
		"sources": [
			"Gorillaz - Every Planet We Reach Is Dead",
			"Iggy Pop & Grace Jones - Nightclubbing",
			"Dave Gahan - Use You",
			"Grace Jones - Use Me",
			"https://youtu.be/dtN6gUHhtlo"
		],
		"songTitle": "Use Every Planet For Nightclubbing",
		"producer": "Minor Arth",
		"artists": "Gorillaz / Dave Gahan / Iggy Pop / Grace Jones",
		"video": "https://youtu.be/dtN6gUHhtlo"
	},
	{
		"n": 9,
		"title": "Steff St Moore - Gorillaz - D'Angelo - MF Has Come",
		"image": "Steff St Moore - Gorillaz - D'Angelo - MF Has Come.jpg",
		"localFile": "Steff St Moore - Gorillaz - D'Angelo - MF Has Come.mp3",
		"sources": [
			"Gorillaz - November Has Come",
			"D'Angelo - Sh*t, Damn, Motherf***er"
		],
		"songTitle": "MF Has Come",
		"producer": "Steff St Moore",
		"artists": "Gorillaz / D'Angelo"
	},
	{
		"n": 10,
		"id": 40383,
		"file": "146643899_781326685_827781983.mp3",
		"title": "Steff St Moore - Gorillaz - Crystal Waters - Gypsy Woman All Alone",
		"image": "Steff St Moore - Gorillaz - Crystal Waters - Gypsy Woman All Alone.jpg",
		"localFile": "Steff St Moore - Gorillaz - Crystal Waters - Gypsy Woman All Alone.mp3",
		"sources": [
			"Gorillaz - All Alone",
			"Crystal Waters - Gypsy Woman"
		],
		"songTitle": "Gypsy Woman All Alone",
		"producer": "Steff St Moore",
		"artists": "Gorillaz / Crystal Waters"
	},
	{
		"n": 11,
		"title": "Steff St Moore - Gorillaz - Bruce Springsteen - Born To Run In The White Light",
		"image": "Steff St Moore - Gorillaz - Bruce Springsteen - Born To Run In The White Light.jpg",
		"localFile": "Steff St Moore - Gorillaz - Bruce Springsteen - Born To Run In The White Light.mp3",
		"sources": [
			"Gorillaz - White Light",
			"Bruce Springsteen - Born To Run"
		],
		"songTitle": "Born To Run In The White Light",
		"producer": "Steff St Moore",
		"artists": "Gorillaz / Bruce Springsteen"
	},
	{
		"n": 12,
		"id": 35582,
		"file": "1503928746_1935336146_1418443366.mp3",
		"title": "Steff St Moore - Gorillaz - Amy Winehouse - Dare To Go Back To Black",
		"image": "Steff St Moore - Gorillaz - Amy Winehouse - Dare To Go Back To Black.jpg",
		"localFile": "Steff St Moore - Gorillaz - Amy Winehouse - Dare To Go Back To Black.mp3",
		"sources": [
			"Gorillaz - DARE",
			"Amy Winehouse - Back To Black"
		],
		"songTitle": "Dare To Go Back To Black",
		"producer": "Steff St Moore",
		"artists": "Gorillaz / Amy Winehouse"
	},
	{
		"n": 13,
		"id": 40201,
		"file": "1340319017_242182282_241613358.mp3",
		"title": "Steff St Moore - Gorillaz - Ultra Nate - Found A Cure Out Of The Monkey's Head",
		"image": "Steff St Moore - Gorillaz - Ultra Nate - Found A Cure Out Of The Monkey's Head.jpg",
		"localFile": "Steff St Moore - Gorillaz - Ultra Nate - Found A Cure Out Of The Monkey's Head.mp3",
		"sources": [
			"Gorillaz - Fire Coming Out of a Monkey's Head",
			"Ultra Naté - Found A Cure"
		],
		"songTitle": "Found A Cure Out Of The Monkey's Head",
		"producer": "Steff St Moore",
		"artists": "Gorillaz / Ultra Naté"
	},
	{
		"n": 14,
		"title": "Minor Arth - Bjork - Massive Attack - Gorillaz - Karma Days Lost On Venus",
		"image": "Minor Arth - Bjork - Massive Attack - Gorillaz - Karma Days Lost On Venus.jpg",
		"localFile": "Minor Arth - Bjork - Massive Attack - Gorillaz - Karma Days Lost On Venus.mp3",
		"sources": [
			"Björk - Venus As A Boy",
			"Massive Attack - Karmacoma",
			"Gorillaz - Don't Get Lost in Heaven / Demon Days"
		],
		"songTitle": "Karma Days Lost On Venus",
		"producer": "Minor Arth",
		"artists": "Bjork / Massive Attack / Gorillaz"
	},
	{
		"title": "Bonus",
		"type": "category",
		"n": 16
	},
	{
		"n": 1,
		"title": "Steff St Moore - Gorillaz - Soul II Soul - Back To Life -- Dirty Harry mix",
		"image": "Steff St Moore - Gorillaz - Soul II Soul - Back To Life -- Dirty Harry mix.jpg",
		"localFile": "Steff St Moore - Gorillaz - Soul II Soul - Back To Life -- Dirty Harry mix.mp3",
		"sources": [
			"Gorillaz - Dirty Harry",
			"Soul II Soul - Back To Life"
		],
		"songTitle": "Back To Life | Dirty Harry mix",
		"producer": "Steff St Moore",
		"artists": "Gorillaz / Soul II Soul"
	},
	{
		"n": 2,
		"id": 32429,
		"file": "809728014_1051900646_1255851805.mp3",
		"title": "Minor Arth - Gorillaz - The Do - Archive - Kids With Fear On Their Shoulders",
		"image": "Minor Arth - Gorillaz - The Do - Archive - Kids With Fear On Their Shoulders.jpg",
		"localFile": "Minor Arth - Gorillaz - The Do - Archive - Kids With Fear On Their Shoulders.mp3",
		"sources": [
			"Gorillaz - Kids With Guns",
			"The Do - On My Shoulders",
			"Archive - Fear There Everywhere"
		],
		"songTitle": "Kids With Fear On Their Shoulders",
		"producer": "Minor Arth",
		"artists": "Gorillaz / The Do / Archive"
	},
	{
		"n": 3,
		"id": 37709,
		"file": "10113748_1637046022_355789952.mp3",
		"title": "DoM - Neneh Cherry - Gorillaz - Feel Good Woman",
		"image": "DoM - Neneh Cherry - Gorillaz - Feel Good Woman.jpg",
		"localFile": "DoM - Neneh Cherry - Gorillaz - Feel Good Woman.mp3",
		"sources": [
			"Neneh Cherry - Woman",
			"Gorillaz - Feel Good, Inc.",
			"https://youtu.be/xSSu5UOTOgw"
		],
		"songTitle": "Feel Good Woman",
		"producer": "DoM",
		"artists": "Neneh Cherry / Gorillaz",
		"video": "https://youtu.be/xSSu5UOTOgw"
	},
	{
		"n": 4,
		"id": 63064,
		"file": "1207726596_1413955144_711940888.mp3",
		"title": "Minor Arth - Gorillaz - The Kinks - Feel Good On A Sunny Afternoon",
		"image": "Minor Arth - Gorillaz - The Kinks - Feel Good On A Sunny Afternoon.jpg",
		"localFile": "Minor Arth - Gorillaz - The Kinks - Feel Good On A Sunny Afternoon.mp3",
		"sources": [
			"Gorillaz - Feel Good, Inc.",
			"The Kinks - Sunny Afternoon"
		],
		"songTitle": "Feel Good On A Sunny Afternoon",
		"producer": "Minor Arth",
		"artists": "Gorillaz / The Kinks"
	},
	{
		"n": 5,
		"id": 52176,
		"file": "1848257567_1854779707_650347842.mp3",
		"title": "DoM - Dolboeb - Gorillaz - Feel Good inc -- Kyoto mix",
		"image": "DoM - Dolboeb - Gorillaz - Feel Good inc -- Kyoto mix.jpg",
		"localFile": "DoM - Dolboeb - Gorillaz - Feel Good inc -- Kyoto mix.mp3",
		"sources": [
			"Dolboeb - Feel Good, Inc.",
			"Gorillaz - Feel Good, Inc."
		],
		"songTitle": "Feel Good inc | Kyoto mix",
		"producer": "DoM",
		"artists": "Dolboeb / Gorillaz"
	},
	{
		"n": 6,
		"id": 51955,
		"file": "583847910_1336926808_314685960.mp3",
		"title": "DoM - Roxy Music - Gorillaz - Feel You inc",
		"image": "DoM - Roxy Music - Gorillaz - Feel You inc.jpg",
		"localFile": "DoM - Roxy Music - Gorillaz - Feel You inc.mp3",
		"sources": [
			"Roxy Music - Editions of you",
			"Gorillaz - Feel Good, Inc."
		],
		"songTitle": "Feel You inc",
		"producer": "DoM",
		"artists": "Roxy Music / Gorillaz"
	},
	{
		"n": 7,
		"id": 65742,
		"file": "103422468_1270342973_624900480.mp3",
		"title": "Minor Arth & DoM - Gorillaz - Depeche Mode - Feel Good Dream",
		"image": "Minor Arth & DoM - Gorillaz - Depeche Mode - Feel Good Dream.jpg",
		"localFile": "Minor Arth & DoM - Gorillaz - Depeche Mode - Feel Good Dream.mp3",
		"sources": [
			"Gorillaz - Feel Good, Inc.",
			"Depeche Mode - Dream On"
		],
		"songTitle": "Feel Good Dream",
		"producer": "Minor Arth & DoM",
		"artists": "Gorillaz / Depeche Mode"
	},
	{
		"n": 8,
		"id": 28352,
		"file": "1504794660_2049043336_1255831903.mp3",
		"title": "Minor Arth - Manu Chao - Gorillaz - Feel Bongo Bong inc",
		"image": "Minor Arth - Manu Chao - Gorillaz - Feel Bongo Bong inc.jpg",
		"localFile": "Minor Arth - Manu Chao - Gorillaz - Feel Bongo Bong inc.mp3",
		"sources": [
			"Manu Chao - Bongo Bong",
			"Gorillaz - Feel Good, Inc."
		],
		"songTitle": "Feel Bongo Bong inc",
		"producer": "Minor Arth",
		"artists": "Manu Chao / Gorillaz"
	},
	{
		"n": 9,
		"title": "Steff St Moore - Gorillaz - Will Downing - Michelle Manana",
		"image": "Steff St Moore - Gorillaz - Will Downing - Michelle Manana.jpg",
		"localFile": "Steff St Moore - Gorillaz - Will Downing - Michelle Manana.mp3",
		"sources": [
			"Gorillaz - El Mañana",
			"Will Downing - Michelle"
		],
		"songTitle": "Michelle Mañana",
		"producer": "Steff St Moore",
		"artists": "Gorillaz / Will Downing"
	},
	{
		"n": 10,
		"title": "Minor Arth - Doris Days - Zero 7 - Gorillaz - To Ulrike Manana",
		"image": "Minor Arth - Doris Days - Zero 7 - Gorillaz - To Ulrike Manana.jpg",
		"localFile": "Minor Arth - Doris Days - Zero 7 - Gorillaz - To Ulrike Manana.mp3",
		"sources": [
			"Doris Days - To Ulrike M. | Zero 7 remix",
			"Gorillaz - El Mañana"
		],
		"songTitle": "To Ulrike Manana",
		"producer": "Minor Arth",
		"artists": "Doris Days / Zero 7 / Gorillaz"
	},
	{
		"n": 11,
		"id": 39841,
		"file": "1120974529_1140256527_908575332.mp3",
		"title": "Steff St Moore - Gorillaz - Prince - Controversy People",
		"image": "Steff St Moore - Gorillaz - Prince - Controversy People.jpg",
		"localFile": "Steff St Moore - Gorillaz - Prince - Controversy People.mp3",
		"sources": [
			"Gorillaz - People",
			"Prince - Controversy"
		],
		"songTitle": "Controversy People",
		"producer": "Steff St Moore",
		"artists": "Gorillaz / Prince"
	},
	{
		"n": 12,
		"id": 28074,
		"file": "231995035_1942416277_998251740.mp3",
		"title": "DoM - Gorillaz - Tears For Fears - Dare To Shout",
		"image": "DoM - Gorillaz - Tears For Fears - Dare To Shout.jpg",
		"localFile": "DoM - Gorillaz - Tears For Fears - Dare To Shout.mp3",
		"sources": [
			"Gorillaz - DARE",
			"Tears For Fears - Shout"
		],
		"songTitle": "Dare To Shout",
		"producer": "DoM",
		"artists": "Gorillaz / Tears For Fears"
	},
	{
		"n": 13,
		"title": "Steff St Moore - Gorillaz - Prince - Don't Get Lost in Automatic Heaven",
		"image": "Steff St Moore - Gorillaz - Prince - Don't Get Lost in Automatic Heaven.jpg",
		"localFile": "Steff St Moore - Gorillaz - Prince - Don't Get Lost in Automatic Heaven.mp3",
		"sources": [
			"Gorillaz - Don't Get Lost in Heaven / Demon Days",
			"Prince - Automatic / Let's Go Crazy"
		],
		"songTitle": "Don't Get Lost in Automatic Heaven",
		"producer": "Steff St Moore",
		"artists": "Gorillaz / Prince"
	}
];

const metas = Array.from(document.getElementsByTagName('meta'));
const meta = {};
metas.forEach(m => { if(m.attributes.property) meta[m.attributes.property.value.replace(/:/g,"_") ] = m.attributes.content.value });

const LOGO_IMAGE = "./artwork/SteffsGorillazMashupProject.png";
const LOGO_TITLE = "Steff's Gorillaz Mashup Project";
const LOGO_LINK = "";

const ALBUM_TITLE = meta.og_title;
const ALBUM_DESCRIPTION = meta.og_description;
const ALBUM_LINK = "https://www.mediafire.com/file/04x0peh45n0es2u/Steffs_Gorillaz_Mashup_Project-Demon_Detournement.zip/file";
const ALBUM_ARTIST = "";
const TRACK_LINK_PATH = "https://remix.audio/track/";
const AUDIO_PATH = "https://remix.audio/uploads/tracks/";
//const IMAGE_PATH = "https://remix.audio/uploads/media/";
const IMAGE_PATH = "http://minorart.free.fr/mashup/demondetournement/artwork/";

//const AUDIO_PATH = "";
//const IMAGE_PATH = "./artwork/";
const AUDIO_TYPE = ".mp3";
const IMAGE_TYPE = ".jpg";
const PLAYER_IMAGE = "./artwork/DemonDetournement.jpg";

const isUrl = s => s && s.includes && s.includes("://");

const audioPlayer = document.querySelector("audio#audioPlayer");
const hiddenPlayer = document.querySelector("audio#hiddenPlayer");
const playlistLinks = document.querySelector("#playlist-links");
const playlists = document.querySelectorAll("p.playlist-text");
var playlist = document.querySelector("p.playlist-text");
var playlistName = "all";
var imageList = document.querySelector("p.images");
var trackList = document.querySelector("p.tracks");
const playerImage = document.querySelector(".player-image");
const playerLabel = document.querySelector(".player-label");
const linkContainer = document.querySelector(".links");
const logoLinks = document.querySelectorAll("a.logo");
const logoImages = document.querySelectorAll(".logo img");
const repeater = document.querySelector("div.repeater");
const albumTitle = document.querySelector(".album-title");
const albumDescription = document.querySelector(".album-description");
const albumLinks = document.querySelectorAll(".album-link");
const totalDuration = document.querySelector(".total-duration");
const viewMode = document.querySelector("select#view-mode");
const categoryTemplate = document.querySelector(".category-template");

var template;
var currentItem = null;
var currentItemElement = null;
var currentItemIndex = null;

var links = {	
	"2025": "#",
	"Albums": "..",
	"Mashup Lovers": "https://www.facebook.com/groups/mashuplovers",
	"Steff St. Moore": "https://remix.audio/profile/SteffStMoore",
	"DoM": "https://remix.audio/profile/DoM",
	"Minor Arth": "https://www.youtube.com/@MinorArth",
	"remix.audio": "https://remix.audio/playlist/2953",
};

var allPlaylists = {};
allPlaylists.all = items;
var producers = ["Steff St Moore", "Minor Arth", "DoM"];

document.title = ALBUM_TITLE;
albumTitle.innerText = ALBUM_ARTIST ? ALBUM_ARTIST + " - " + ALBUM_TITLE : ALBUM_TITLE;
albumDescription.innerHTML = ALBUM_DESCRIPTION;
albumLinks.forEach(a => a.href = ALBUM_LINK);

if(!LOGO_IMAGE)
	logoLinks.forEach(l => l.remove())
else {
	logoImages.forEach(i => setImage(i, LOGO_IMAGE));
	logoLinks.forEach(l => l.href = LOGO_LINK);
}

displayLinks(linkContainer);

// Audio has ended when this function is executed
audioPlayer.addEventListener('ended', playNext, false);

audioPlayer.addEventListener('loadedmetadata', () => {
	if(currentItem.duration) return;

    currentItem.duration  = audioPlayer.duration;

	if(currentItem.duration && currentItemElement && currentItemElement.querySelector(".duration"))	
		currentItemElement.querySelector(".duration").innerHTML = formatTime(currentItem.duration);
		
	console.log("audioPlayer loadedmetadata", currentItem.n, currentItem.duration);
});

hiddenPlayer.addEventListener('loadedmetadata', () => {
	if(currentItem.duration) return;

	currentItem.duration  = hiddenPlayer.duration;	
	console.log("hiddenPlayer loadedmetadata", currentItem.n, currentItem.duration);
});

//window.onresize = () => albumTitle.innerText = innerWidth + " px / ";
//onresize();

const USE_REMOTE_FILES = isUrl(AUDIO_PATH);
const USE_LOCAL_FILES = !USE_REMOTE_FILES;

if(USE_REMOTE_FILES)
{
//	items = items.filter(i => i.file);
items.forEach();
	setImage(playerImage, PLAYER_IMAGE);
	refreshList();
}
else if(items.length)
{
	items.forEach(makeLocalPlaylistItem);
	setImage(playerImage, PLAYER_IMAGE);
	refreshList();
}
else {
	var pl = Array.from(playlists).map(makePlaylist);

	if(pl.length > 1) {
		allPlaylists.all = [].concat(...pl);
		allPlaylists.all.id = "all";
		allPlaylists.all.title = "All";
	}

	pl.forEach((p, i) => allPlaylists[p.title || p.id] = p);
}

if(!producers){
	producers = allPlaylists.all.map(i => i.author || i.producer).filter(p => p && !p.includes("&")).sort();
	producers = new Set(producers);
}

if(producers.length > 1)
	producers.forEach(p => { 
		allPlaylists[p] = allPlaylists.all.filter(i => (i.author || i.producer || "").includes(p));
		allPlaylists[p].title = p;
	});

Object.keys(allPlaylists).forEach(makePlaylistLink);

setPlaylist();

function setImage(img, src) {
	if(!img || !src) return;
	return img.src = (isUrl(src) || src.includes("/")) ? src : IMAGE_PATH + src;
}

function setPlaylist(index) {
	// console.log("setPlaylist", index);
	if(!index) index = Object.keys(allPlaylists)[0];
	if(index >= playlists.length - 1) index = "all";
	playlistName = index;

	if(PLAYER_IMAGE) {
		playerImage.style.display = "inline";
		setImage(playerImage, PLAYER_IMAGE);
		hideBrokenImage(playerImage);
	}

	if(playlists && playlists.length)
		playlist = playlists[index];

	items = allPlaylists[index];
	refreshList();
	return items;
}

function makePlaylist(playlist) {
	var items = playlist? playlist.innerText.trim().split("\n\n") : [];
	if(items.length == 1) items = playlist.innerText.trim().split("\n");
	items = items.filter(l => l && l.length);
	items = items.map(makePlaylistItem);
	items.id = playlist.id;
	items.title = playlist.title;
	items.unshift({title: playlist.title});
	return items;
}

function hideBrokenImages() {
	document.querySelectorAll("img.artwork").forEach(hideBrokenImage);
}

function hideBrokenImage(img) {
	img.onerror = () => PLAYER_IMAGE ? img.src = setImage(playerImage, PLAYER_IMAGE) : img.style.display = "none";
}

function shuffle() {
	items = items.filter (i => i.file);
	items.sort(i => Math.random() - .5);
	refreshList();
	return items;
}

function reverse() {
	items = items.slice().sort(i => -1);
	refreshList();
	return items;
}

function reorder() {
	return setPlaylist(playlistName);
}

function substringBefore(s, sub, last, stringOrEmpty, include, ignoreCase)
{
	if(!s) return s;

	var lstr = s;
	var lsub = sub;
	if(ignoreCase) {
		lstr = lstr.toLowerCase();
		lsub = lsub.toLowerCase();
	}

	var pos = last ? lstr.lastIndexOf(lsub) : lstr.indexOf(lsub);
	if(pos < 0)
		return stringOrEmpty ? "" : s;

	if(include)
		pos += sub.length;
	return s.substring(0, pos);
}

function substringAfter(s, sub, last, stringOrEmpty, include, ignoreCase)
{
	if(!s) return s;

	var lstr = s;
	var lsub = sub;
	if(ignoreCase) {
		lstr = lstr.toLowerCase();
		lsub = lsub.toLowerCase();
	}

	var pos = last ? lstr.lastIndexOf(lsub) : lstr.indexOf(lsub);
	if(pos < 0)
		return stringOrEmpty ? s : "";

	if(!include)
		pos += sub.length;

	return s.substring(pos);
}

function displayLinks(container)
{
	var linkTemplate = document.querySelector("a.link-template");
	if(links)
		for(var key in links) {
			var link = cloneTemplate(linkTemplate, container);
			link.innerText = key;
			link.href = links[key];
			//link.target = "link";
		}
}

function makePlaylistLink(pl, i) {
	if(!pl) return;
	var linkTemplate = document.querySelector("a.play-link-template");
	var link = cloneTemplate(linkTemplate, playlistLinks);
	link.innerText = pl;
	link.onclick = () => setPlaylist(pl);
}

function refreshList() {
	repeater.innerHTML = "";
	template = document.querySelector("div." + viewMode.value);
	items.forEach(displayPlaylistItem);
	var total = getTotalDuration(items);
	totalDuration.innerText = total ?  "Total: " + formatTime(total) : "";
}

function makeLocalPlaylistItem(item, i) {
	item.n = i + 1;
	if(item.localFile)
	{
		item.file = item.localFile;
		item.image = item.localFile.replace(AUDIO_TYPE, IMAGE_TYPE);
	}
}

function makePlaylistItem(item, i) {
	var lines = item.split("\n").filter(l => l && l.length);
	var item = {};
	item.n = i + 1;
	item.title = lines.shift().trim();
	item.image = item.title + IMAGE_TYPE;
	item.file = item.title + AUDIO_TYPE;
	item.sources = lines;

	var n = Number(substringBefore(item.title, " - "));
	if(n && !isNaN(n)) {
		item.n = n;
		item.title = substringAfter(item.title, " - ");
	}

	var parts = item.title.split(" - ");
	item.songTitle = parts.pop() || "";
	item.songTitle = item.songTitle.replace(" -- ", " | ");
	if(!ALBUM_ARTIST) item.producer = parts.shift();
	item.artists = parts.join(" / ");

	if(!item.artists && item.songTitle.includes("(")) {
		item.artists = substringAfter(item.songTitle, "(", true);
		item.artists = substringBefore(item.artists, ")", true);
	}

	return item;
}

function displayPlaylistItem(item, i) {
	if(!item.n) item.n = i + 1;

	el = cloneTemplate(item.type == "category" ? categoryTemplate : template, repeater);
	if(el.querySelector(".number"))
		el.querySelector(".number").innerHTML = item.n;
	el.onclick = () => playFile(i);

	var title = el.querySelector(".title");
	var separator = viewMode.value == "playlist-template0" ? "  -  " : "\n";
	var itemTitle = [ item.artists, item.songTitle || item.title, item.author || item.producer ].filter(s => s).join(separator);
	if(title) title.innerHTML = itemTitle;

	var img = el.querySelector("img.artwork");
	if(img && item.image) {
		hideBrokenImage(img);
		img.title = itemTitle;
		setImage(img, item.image);
	}

	//highlight current item
	if(item == currentItem) {
		el.classList.add("active");
		currentItemIndex = items.indexOf(currentItem);
		currentItemElement = repeater.childNodes[currentItemIndex];
	}

	if(item.duration && el.querySelector(".duration"))
		el.querySelector(".duration").innerHTML = formatTime(item.duration);
	if(item.sources)
		item.sources.forEach( (s, j) => isUrl(s) && (item.video = s) );

	if(item.sources && el.querySelector(".sources"))
		item.sources.forEach( (s, j) => el.querySelector(".sources").innerHTML += isUrl(s)? "" : (j ? "\n+ " : "= ") + s );

	if(title && item.video)
		title.innerHTML += '\n<a onclick="stopPropagation(event)" target="video" href="' + item.video + '">VIDEO</a>';

	if(title && item.links)
		for(var key in item.links)
			title.innerHTML += '\n<a onclick="stopPropagation(event)" target="video" href="' + item.links[key] + '">'+ key +'</a>';

	var trackLink = el.querySelector("a.remix-audio");
	if(trackLink && item.id)
		trackLink.href = TRACK_LINK_PATH + item.id;
	else if(trackLink)
		trackLink.remove();
}

function formatTime(duration)
{
	duration = Math.round(duration); 
	var hour = Math.floor(duration / 3600);
	var min = Math.floor(duration / 60) % 60;
	if(hour > 0 && min < 10) min = "0" + min;
	var sec = duration % 60;
	if(sec < 10) sec = "0" + sec;
	return hour > 0 ?  hour + ":" + min + ":" + sec : min + ":" + sec;
}

function cloneTemplate(node, parent)
{
	var clone = node.cloneNode();
	clone.innerHTML = node.innerHTML;
	if(parent) parent.append(clone);
	return clone;
}

function playFile(item)
{
	if(typeof item == "number") {
		currentItemIndex = item;
		item = items[item];
	}
	if(!item) return;
	if(!item.file) return playNext();

	currentItem = item;
	playerImage.style.display = "inline";
	setImage(playerImage, item.image);
	playerLabel.innerText = playerImage.title = [item.artists,  item.songTitle || item.title, item.author || item.producer].filter(s => s).join("\n");
	var subdir = playlist ? playlist.dataset.path || playlist.getAttribute("path") : "";
	subdir = subdir ? subdir = subdir + "/" : "";
	audioPlayer.src = AUDIO_PATH + subdir + item.file;
	audioPlayer.controls = true;
	audioPlayer.play();

	//highlight current playlist item
	if(currentItemElement)
		currentItemElement.classList.remove("active");
	currentItemElement = repeater.childNodes[currentItemIndex];
	if(currentItemElement)
		currentItemElement.classList.add("active");
	if(item.duration && currentItemElement.querySelector(".duration"))	currentItemElement.querySelector(".duration").innerHTML = formatTime(item.duration);
	return currentItem;
}

//load audio file metadata without playing
function preloadFile(item)
{
	if(!item || !item.file) return;

	currentItem = item;
	var subdir = playlist ? playlist.dataset.path || playlist.getAttribute("path") : "";
	subdir = subdir ? subdir = subdir + "/" : "";
	hiddenPlayer.src = AUDIO_PATH + subdir + item.file;
}

function playNext(evt) {
	// console.log("playNext", evt);
	if(currentItemIndex === null) currentItemIndex = -1;
	return playFile(++currentItemIndex % items.length || 0);
}

function playPrevious() {
	if(currentItemIndex === null) currentItemIndex = 0;
	var previousIndex = (--currentItemIndex + items.length) % items.length || 0;
	return playFile(previousIndex);
}

function loadDurations()
{
	var i = 0;
	var inter = setInterval(() => {
		currentItem = items[i++];
		if(i > items.length) {
			clearInterval(inter);
			refreshList();
		}
		else if(currentItem && !currentItem.duration)
			preloadFile(currentItem);
	}, 400);
}

function getTotalDuration(items)
{
	return items.reduce( (a,i) => a += i.duration || 0, 0);
}

function stopPropagation(event) {
	event.stopPropagation();
}

function playlistToText(num) {
	var format = num ? (i => (i.n < 10 ? " " : "") + i.n + ". " + i.file) : i => i.file ;
	return items.map(format).join("\n").replace(/\.mp3/g, "");
}

function m3uPlaylist()
{
	return "#EXTM3U\n" + items.map(i => i.file).join("\n");
}

function fetchJsonData(url, variable) {
	fetch(url)
		.then(response => {
			if (!response.ok) throw new Error(`HTTP error! Status: ${response.status}`);
			return response.json();
		})
		.then(data => {
			console.log(data);
			if(variable) window[variable] = data;
		})
		.catch(error => console.error('Failed to fetch data:', error)); 
}
</script>

</body>
</html>